<!DOCTYPE html>
<html>
<head>
  <title>PrognosAI - Dashboard</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
  <h1>ðŸ§  PrognosAI - Machine Health Dashboard</h1>

  <div class="charts-container">
    <div class="chart-box">
      <h3>Health Score Over Time</h3>
      <canvas id="healthChart"></canvas>
    </div>
  </div>

  <a href="/" class="btn">â¬… Back to Input</a>

  <script>
    const ctx = document.getElementById('healthChart').getContext('2d');
    const healthChart = new Chart(ctx, {
      type: 'line',
      data: {
        labels: [],
        datasets: [{
          label: 'Health Score',
          data: [],
          borderColor: '#0077b6',
          backgroundColor: 'rgba(0,119,182,0.1)',
          tension: 0.4
        }]
      },
      options: { scales: { y: { beginAtZero: true, max: 100 } } }
    });

    async function updateChart() {
      const response = await fetch('/data');
      const jsonData = await response.json();
      healthChart.data.labels = jsonData.map(row => row.Timestamp);
      healthChart.data.datasets[0].data = jsonData.map(row => row.Health_Score);
      healthChart.update();
    }

    setInterval(updateChart, 5000);
    updateChart();
  </script>
</body>
</html>
